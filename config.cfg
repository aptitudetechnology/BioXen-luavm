#!/usr/bin/env python3
"""
BioXen VM Configuration
Settings for persistent VM management and hypervisor functionality
"""

import os
from pathlib import Path
from dataclasses import dataclass
from typing import Dict, Any, Optional

@dataclass
class VMConfig:
    """Configuration for VM management"""
    
    # Directories
    log_dir: str = "./logs/bioxen_vms"
    session_dir: str = "./sessions"
    temp_dir: str = "./tmp/bioxen"
    
    # VM Settings
    default_vm_timeout: int = 30  # seconds
    max_persistent_vms: int = 10
    vm_heartbeat_interval: int = 5  # seconds
    vm_cleanup_timeout: int = 10  # seconds for graceful shutdown
    
    # Terminal Settings
    terminal_buffer_size: int = 8192
    terminal_history_size: int = 1000
    attach_timeout: int = 5  # seconds
    detach_grace_period: float = 1.0  # seconds
    
    # Monitoring Settings
    enable_monitoring: bool = True
    monitor_interval: int = 10  # seconds
    log_vm_output: bool = True
    log_rotation_size: int = 10 * 1024 * 1024  # 10MB
    
    # Network Settings
    default_server_port: int = 8080
    port_range_start: int = 8080
    port_range_end: int = 8090
    socket_timeout: int = 30
    
    # Display Settings
    use_rich_display: bool = True
    show_timestamps: bool = True
    color_output: bool = True
    table_max_width: int = 120
    
    # Security Settings
    allow_file_operations: bool = True
    allow_network_operations: bool = True
    sandbox_mode: bool = False
    max_memory_mb: Optional[int] = None  # No limit by default
    
    # Lua Settings