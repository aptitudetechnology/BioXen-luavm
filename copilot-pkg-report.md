# Copilot Package Installation Enhancement Report

## Summary
This report documents the required and implemented changes to the `install_packages()` method in the `VMCLI` class of `interactive-bioxen-lua.py` to support both global and VM-targeted Lua package installation.

## Background
Previously, package installation was performed globally using the Curator system (`self.curator.install_package()`), which did not make packages available inside process-isolated VMs managed by `self.vm_manager`.

## Enhancement Requirements
1. **VM Selection Step**: Allow the user to choose a running VM or global installation before installing packages.
2. **VM-Targeted Installation**: For VM-targeted installs, send LuaRocks install commands to the VM using `self.vm_manager.send_input(vm_id, luarocks_command)`.
3. **Global Installation Option**: Retain the ability to install packages globally using Curator.
4. **No Running VMs Handling**: If no VMs are running, only present the global option.
5. **Verification Step**: After installation, test package loading in the VM using `require()`.
6. **Output Parsing**: Parse command output to determine installation success/failure and provide user feedback.

## Implementation Plan
- Refactor `install_packages()` to:
  - Present a menu for VM selection (running VMs + "Global" option).
  - Branch logic for VM-targeted vs global installation.
  - Send LuaRocks install commands to the VM and read output.
  - After install, send a Lua command to verify package loading.
  - Parse and display results to the user.
  - Pause for user input before returning to the menu.

## Status
- The above requirements have been analyzed and are ready for implementation in the codebase.
- See `interactive-bioxen-lua.py` for the current method and planned changes.

---
Generated by GitHub Copilot on 2025-08-29.
